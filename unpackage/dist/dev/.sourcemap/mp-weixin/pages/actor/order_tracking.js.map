{"version":3,"sources":["uni-app:///main.js","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?8279","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?78ee","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?3893","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?0731","uni-app:///pages/actor/order_tracking.vue","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?dc6b","webpack:///D:/SceneReady/SceneReady-main/pages/actor/order_tracking.vue?c649"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","orderId","order","crewInfo","mapCenter","latitude","longitude","myLocation","meetingLocation","mapScale","markers","polyline","circles","statusText","distanceText","isCheckedIn","isCompleted","canCheckIn","checkinTime","trackTimer","distanceToMeeting","isStarted","isOrderCancelled","cancelledByType","applicationStatus","rejectReason","onLoad","onUnload","methods","loadOrderInfo","orderCo","res","uni","title","icon","setTimeout","url","console","loadCrewInfo","userCo","nickname","avatar","mobile","startTracking","stopTracking","clearInterval","getMyLocation","type","isHighAccuracy","highAccuracyExpireTime","success","fail","centerToMyLocation","onRegionChange","updateMapElements","newMarkers","id","iconPath","width","height","anchor","x","y","callout","content","display","bgColor","color","fontSize","borderRadius","padding","newCircles","radius","fillColor","strokeWidth","calculateDistance","getDistance","Math","submitTrack","checkIn","mask","message","duration","errorMsg","formatDateTime","formatTime","formatPrice","openNavigation","name","address","callCrew","phoneNumber","messageCrew","reportIssue","itemList","handleCannotArrive","confirmText","confirmColor","modalRes","submitIssue","description","issueData","issue_type","handleLateWarning","userName","handleOtherIssue","editable","placeholderText","inputText","notifyCrew","actor_location","startDeparture","result","completeWork","cancelText","viewDetail","goBack","cancelApplication","refreshStatus"],"mappings":"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AAA;MACA;MACA;;MAEA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;QACAC;QACA;MACA;IACA;IAEAC;MAAA;MACAd;QACAe;QACAC;QACAC;QACAC;UACA;YACA7C;YACAC;UACA;UACA;UACA;UACA;UACA+B;QACA;QACAc;UACAd;QACA;MACA;IACA;IAEAe;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;IAAA,CACA;IAEAC;MACA;MACA;;MAEA;MACA;QACAC;UACAC;UACAnD;UACAC;UACAmD;UACAC;UACAC;UACAC;YAAAC;YAAAC;UAAA;UACAC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;UACA;QACA;;QAEA;QACAC;UACAlE;UACAC;UACAkE;UACAL;UACAM;UACAC;QACA;MACA;MAEA;MACA;IACA;IAEAC;MACA;QACA;MACA;MAEA,gCACA,0BACA,2BACA,+BACA,+BACA;MAEA;;MAEA;MACA;MAEA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA,QACAC,0CACAA,iCACAA,iCACAA;MACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAGAhD;gBAAA;gBAAA,OACAA;kBACAxB;kBACAD;gBACA;cAAA;gBAHA0B;gBAKA;kBACAM;kBACA;kBACA;oBACA;kBACA;gBACA;kBACAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA0C;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IAEA;kBAAA;kBAAA;gBAAA;gBACA/C;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAAA,IAIA;kBAAA;kBAAA;gBAAA;gBACAF;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAAA,IAIA;kBAAA;kBAAA;gBAAA;gBACAF;kBACAC;kBACAC;gBACA;gBACA;gBAAA;cAAA;gBAAA;gBAKAF;kBAAAC;kBAAA+C;gBAAA;gBAEAlD;gBAAA;gBAAA,OACAA;kBACAxB;kBACAD;gBACA;cAAA;gBAHA0B;gBAKAC;gBAEA;kBACA;kBACA;;kBAEA;kBACAiD;kBACA;oBACAA;kBACA;kBAEAjD;oBACAC;oBACAC;oBACAgD;kBACA;;kBAEA;kBACA;kBACA;gBACA;kBACA;kBACAC;kBAEA;oBACA;oBACAA;kBACA;kBAEAnD;oBACAC;oBACAC;oBACAgD;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAlD;gBACAK;gBACAL;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAkD;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;QACAvD;UACAC;UACAC;QACA;QACA;MACA;MAEAF;QACA3B;QACAC;QACAkF;QACAC;MACA;IACA;IAEAC;MACA;QACA1D;UACA2D;QACA;MACA;QACA3D;UACAC;UACAC;QACA;MACA;IACA;IAEA0D;MACA;MACA5D;QACAC;QACAC;MACA;IACA;IAEA;IACA2D;MAAA;MACA7D;QACA8D;QACA5C;UACA;UACA;UAEA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IAEA6C;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA/D;kBACAC;kBACA+B;kBACAgC;kBACAC;kBACA/C;oBAAA;sBAAA;sBAAA;wBAAA;0BAAA;4BAAA;8BAAA,KACAgD;gCAAA;gCAAA;8BAAA;8BAAA;8BAEAlE;gCAAAC;gCAAA+C;8BAAA;8BAEAlD;8BAAA;8BAAA,OACAA;4BAAA;8BAAAC;8BAEAC;8BAEA;gCACAA;kCACAC;kCACAC;gCACA;gCACAC;kCACAH;gCACA;8BACA;gCACAA;kCACAC;kCACAC;gCACA;8BACA;8BAAA;8BAAA;4BAAA;8BAAA;8BAAA;8BAEAF;8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","file":"pages/actor/order_tracking.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/actor/order_tracking.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order_tracking.vue?vue&type=template&id=3e7992db&scoped=true&\"\nvar renderjs\nimport script from \"./order_tracking.vue?vue&type=script&lang=js&\"\nexport * from \"./order_tracking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order_tracking.vue?vue&type=style&index=0&id=3e7992db&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e7992db\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/actor/order_tracking.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_tracking.vue?vue&type=template&id=3e7992db&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 =\n    _vm.applicationStatus === \"pending\"\n      ? _vm.formatDateTime(_vm.order.work_start_time) || \"待定\"\n      : null\n  var m1 =\n    _vm.applicationStatus === \"pending\"\n      ? _vm.formatPrice(_vm.order.price_amount)\n      : null\n  var m2 =\n    !(_vm.applicationStatus === \"pending\") &&\n    !(_vm.applicationStatus === \"rejected\")\n      ? _vm.formatDateTime(_vm.order.work_start_time) || \"待定\"\n      : null\n  var m3 =\n    !(_vm.applicationStatus === \"pending\") &&\n    !(_vm.applicationStatus === \"rejected\")\n      ? _vm.formatPrice(_vm.order.price_amount)\n      : null\n  var m4 =\n    !(_vm.applicationStatus === \"pending\") &&\n    !(_vm.applicationStatus === \"rejected\") &&\n    !!_vm.isCheckedIn\n      ? _vm.formatTime(_vm.checkinTime)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_tracking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_tracking.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"tracking-page\">\n    <!-- 申请待审核状态 -->\n    <view v-if=\"applicationStatus === 'pending'\" class=\"pending-page\">\n      <view class=\"pending-content\">\n        <view class=\"pending-icon\">\n          <uni-icons type=\"clock\" size=\"80\" color=\"#FFD700\"></uni-icons>\n        </view>\n        <text class=\"pending-title\">申请审核中</text>\n        <text class=\"pending-desc\">您的申请正在等待剧组审核，请耐心等待</text>\n        <view class=\"pending-order-info\">\n          <view class=\"order-info-item\">\n            <text class=\"label\">订单编号</text>\n            <text class=\"value\">{{ orderId }}</text>\n          </view>\n          <view class=\"order-info-item\">\n            <text class=\"label\">集合地点</text>\n            <text class=\"value\">{{ order.meeting_location_name || '待定' }}</text>\n          </view>\n          <view class=\"order-info-item\">\n            <text class=\"label\">工作时间</text>\n            <text class=\"value\">{{ formatDateTime(order.work_start_time) || '待定' }}</text>\n          </view>\n          <view class=\"order-info-item\">\n            <text class=\"label\">工作报酬</text>\n            <text class=\"value price\">{{ formatPrice(order.price_amount) }}/{{ order.price_unit === 'day' ? '天' : '时' }}</text>\n          </view>\n        </view>\n        <view class=\"pending-actions\">\n          <button class=\"btn-secondary\" @tap=\"cancelApplication\">取消申请</button>\n          <button class=\"btn-primary\" @tap=\"refreshStatus\">刷新状态</button>\n        </view>\n      </view>\n    </view>\n\n    <!-- 申请被拒绝状态 -->\n    <view v-else-if=\"applicationStatus === 'rejected'\" class=\"rejected-page\">\n      <view class=\"rejected-content\">\n        <view class=\"rejected-icon\">\n          <uni-icons type=\"close\" size=\"80\" color=\"#FF5252\"></uni-icons>\n        </view>\n        <text class=\"rejected-title\">申请未通过</text>\n        <text class=\"rejected-desc\">{{ rejectReason || '很遗憾，您的申请未被通过' }}</text>\n        <view class=\"rejected-actions\">\n          <button class=\"btn-primary\" @tap=\"goBack\">返回订单列表</button>\n        </view>\n      </view>\n    </view>\n\n    <!-- 已通过/正常追踪状态 -->\n    <template v-else>\n      <!-- 地图区域 -->\n      <map\n        id=\"trackingMap\"\n        class=\"tracking-map\"\n        :latitude=\"mapCenter.latitude\"\n        :longitude=\"mapCenter.longitude\"\n        :scale=\"mapScale\"\n        :markers=\"markers\"\n        :polyline=\"polyline\"\n        :circles=\"circles\"\n        :show-location=\"true\"\n        @regionchange=\"onRegionChange\"\n      >\n        <!-- 状态信息覆盖层 -->\n        <cover-view class=\"status-overlay\">\n          <cover-view class=\"status-card-cover\">\n            <cover-view class=\"status-title\">{{ statusText }}</cover-view>\n            <cover-view class=\"status-distance\">{{ distanceText }}</cover-view>\n          </cover-view>\n        </cover-view>\n\n        <!-- 定位按钮 -->\n        <cover-view class=\"location-btn\" @tap=\"centerToMyLocation\">\n          <cover-view class=\"location-icon\">O</cover-view>\n        </cover-view>\n      </map>\n\n      <!-- 底部信息面板 -->\n      <!-- 订单信息 -->\n      <view class=\"order-info-section\">\n        <view class=\"info-row\">\n          <uni-icons type=\"location\" size=\"20\" color=\"#FFD700\"></uni-icons>\n          <view class=\"info-content\">\n            <text class=\"info-label\">集合地点</text>\n            <text class=\"info-value\">{{ order.meeting_location_name || '集合地点' }}</text>\n          </view>\n          <view class=\"nav-btn\" @tap=\"openNavigation\">\n            <uni-icons type=\"navigate\" size=\"24\" color=\"#2979FF\"></uni-icons>\n          </view>\n        </view>\n\n        <view class=\"info-row\">\n          <uni-icons type=\"calendar\" size=\"20\" color=\"#FFD700\"></uni-icons>\n          <view class=\"info-content\">\n            <text class=\"info-label\">工作时间</text>\n            <text class=\"info-value\">{{ formatDateTime(order.work_start_time) || '待定' }}</text>\n          </view>\n        </view>\n\n        <view class=\"info-row\">\n          <uni-icons type=\"wallet\" size=\"20\" color=\"#FFD700\"></uni-icons>\n          <view class=\"info-content\">\n            <text class=\"info-label\">工作报酬</text>\n            <text class=\"info-value price\">{{ formatPrice(order.price_amount) }}/{{ order.price_unit === 'day' ? '天' : '时' }}</text>\n          </view>\n        </view>\n      </view>\n\n      <!-- 打卡状态 -->\n      <view class=\"checkin-section\">\n        <view class=\"checkin-status\">\n          <view class=\"status-item\" :class=\"{ done: isCheckedIn }\">\n            <view class=\"status-dot\"></view>\n            <text>{{ isCheckedIn ? '已打卡' : '待打卡' }}</text>\n          </view>\n          <view class=\"status-line\" :class=\"{ active: isCheckedIn }\"></view>\n          <view class=\"status-item\" :class=\"{ done: isCompleted }\">\n            <view class=\"status-dot\"></view>\n            <text>{{ isCompleted ? '已完成' : '进行中' }}</text>\n          </view>\n        </view>\n\n        <!-- 打卡按钮 -->\n        <view class=\"checkin-action\">\n          <button\n            v-if=\"!isCheckedIn\"\n            class=\"checkin-btn\"\n            :class=\"{ disabled: !canCheckIn || !isStarted }\"\n            :disabled=\"!canCheckIn || !isStarted\"\n            @tap=\"checkIn\"\n          >\n            <uni-icons type=\"checkmarkempty\" size=\"28\" color=\"#000\"></uni-icons>\n            <text>{{ !isStarted ? '请先点击出发' : (canCheckIn ? '打卡签到' : '未到达集合点') }}</text>\n          </button>\n\n          <view v-else class=\"checkin-done\">\n            <uni-icons type=\"checkmarkempty\" size=\"24\" color=\"#4CAF50\"></uni-icons>\n            <text>打卡时间: {{ formatTime(checkinTime) }}</text>\n          </view>\n        </view>\n      </view>\n\n      <!-- 剧组联系 -->\n      <view class=\"contact-section\">\n        <view class=\"contact-info\">\n          <image class=\"crew-avatar\" :src=\"crewInfo.avatar || '/static/default-crew.png'\" mode=\"aspectFill\"></image>\n          <view class=\"crew-detail\">\n            <text class=\"crew-name\">{{ crewInfo.nickname || '剧组' }}</text>\n            <text class=\"crew-label\">发布方</text>\n          </view>\n        </view>\n        <view class=\"contact-actions\">\n          <view class=\"contact-btn\" @tap=\"callCrew\">\n            <uni-icons type=\"phone\" size=\"24\" color=\"#FFD700\"></uni-icons>\n          </view>\n          <view class=\"contact-btn\" @tap=\"messageCrew\">\n            <uni-icons type=\"chat\" size=\"24\" color=\"#FFD700\"></uni-icons>\n          </view>\n        </view>\n      </view>\n\n      <!-- 订单取消提示 -->\n      <view v-if=\"isOrderCancelled\" class=\"cancelled-banner\">\n        <uni-icons type=\"info\" size=\"20\" color=\"#FF5252\"></uni-icons>\n        <text v-if=\"cancelledByType === 'crew'\">剧组已取消订单</text>\n        <text v-else-if=\"cancelledByType === 'actor'\">您已取消接单</text>\n        <text v-else>订单已取消</text>\n      </view>\n\n      <!-- 操作按钮 -->\n      <view class=\"bottom-actions\" v-if=\"!isOrderCancelled\">\n        <button class=\"btn-secondary\" @tap=\"reportIssue\">遇到问题</button>\n        <!-- 未出发状态 -->\n        <button v-if=\"!isStarted\" class=\"btn-primary departure\" @tap=\"startDeparture\">\n          我已出发\n        </button>\n        <!-- 已出发但未打卡 -->\n        <button v-else-if=\"!isCheckedIn\" class=\"btn-primary\" :class=\"{ disabled: !canCheckIn }\" :disabled=\"!canCheckIn\" @tap=\"checkIn\">\n          {{ canCheckIn ? '打卡签到' : '前往集合点中...' }}\n        </button>\n        <!-- 已打卡但未完成 -->\n        <button v-else-if=\"!isCompleted\" class=\"btn-primary waiting\" disabled>待剧组确认</button>\n        <!-- 已完成 -->\n        <button v-else class=\"btn-primary completed\" @tap=\"viewDetail\">已完成 - 查看详情</button>\n      </view>\n\n      <!-- 订单取消后的返回按钮 -->\n      <view class=\"bottom-actions\" v-else>\n        <button class=\"btn-secondary\" @tap=\"goBack\">返回</button>\n      </view>\n    </template>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      orderId: '',\n      order: {},\n      crewInfo: {},\n      mapCenter: {\n        latitude: 29.5630,\n        longitude: 106.4650\n      },\n      myLocation: null,\n      meetingLocation: null,\n      mapScale: 15,\n      markers: [],\n      polyline: [],\n      circles: [],\n      statusText: '前往集合地点',\n      distanceText: '距离计算中...',\n      isCheckedIn: false,\n      isCompleted: false,\n      canCheckIn: false,\n      checkinTime: null,\n      trackTimer: null,\n      distanceToMeeting: Infinity,\n      // 新增状态\n      isStarted: false,           // 是否已出发\n      isOrderCancelled: false,    // 订单是否被取消\n      cancelledByType: '',        // 取消方: 'crew' | 'actor'\n      // 多人申请模式状态\n      applicationStatus: '',      // 申请状态: '' | 'pending' | 'approved' | 'rejected'\n      rejectReason: ''            // 拒绝原因\n    }\n  },\n\n  onLoad(options) {\n    if (options.id) {\n      this.orderId = options.id\n      this.loadOrderInfo()\n      // 不再自动启动轨迹追踪，需要用户点击\"我已出发\"后才开始\n    }\n  },\n\n  onUnload() {\n    this.stopTracking()\n  },\n\n  methods: {\n    async loadOrderInfo() {\n      try {\n        // 使用云对象获取订单详情\n        const orderCo = uniCloud.importObject('order-co')\n        const res = await orderCo.getDetail(this.orderId)\n\n        if (res.code === 0 && res.data) {\n          this.order = res.data\n\n          // 检查多人申请模式下的申请状态\n          if (res.data.my_application_status) {\n            this.applicationStatus = res.data.my_application_status\n            if (res.data.my_application_status === 'rejected') {\n              this.rejectReason = res.data.my_reject_reason || ''\n            }\n            // 如果申请还在待审核或已拒绝，不继续加载追踪信息\n            if (this.applicationStatus === 'pending' || this.applicationStatus === 'rejected') {\n              // 仍然加载剧组信息用于显示\n              if (this.order.publisher_id) {\n                await this.loadCrewInfo(this.order.publisher_id)\n              }\n              return\n            }\n          }\n\n          // 检查订单是否被取消\n          if (this.order.order_status === 4) {\n            this.isOrderCancelled = true\n            // 判断是谁取消的\n            if (this.order.is_cancelled_by_crew) {\n              this.cancelledByType = 'crew'\n            } else if (this.order.actor_cancel_reason) {\n              this.cancelledByType = 'actor'\n            }\n            this.stopTracking()\n            return\n          }\n\n          // 设置集合地点\n          if (this.order.meeting_location) {\n            this.meetingLocation = {\n              latitude: this.order.meeting_location.coordinates[1],\n              longitude: this.order.meeting_location.coordinates[0]\n            }\n            this.updateMapElements()\n          }\n\n          // 检查打卡状态（arrive_time 表示已打卡）\n          this.isCheckedIn = !!this.order.arrive_time\n          this.checkinTime = this.order.arrive_time\n\n          // 检查订单完成状态\n          this.isCompleted = this.order.order_status === 3\n\n          // 检查是否已出发（开始轨迹追踪）\n          if (this.order.tracking_started) {\n            this.isStarted = true\n            // 已出发，自动开始轨迹追踪\n            this.startTracking()\n          } else {\n            // 未出发，先获取一次位置用于显示\n            this.getMyLocation()\n          }\n\n          // 加载剧组信息\n          if (this.order.publisher_id) {\n            await this.loadCrewInfo(this.order.publisher_id)\n          }\n        } else if (res.code === 401) {\n          uni.showToast({ title: '请先登录', icon: 'none' })\n          setTimeout(() => {\n            uni.reLaunch({ url: '/pages/index/index' })\n          }, 1500)\n        } else {\n          uni.showToast({ title: res.message || '加载失败', icon: 'none' })\n        }\n      } catch (error) {\n        console.error('加载订单信息失败:', error)\n        uni.showToast({ title: '网络错误', icon: 'none' })\n      }\n    },\n\n    async loadCrewInfo(crewId) {\n      try {\n        const userCo = uniCloud.importObject('user-co')\n        const res = await userCo.getPublicProfile(crewId)\n\n        if (res.code === 0 && res.data) {\n          this.crewInfo = {\n            nickname: res.data.nickname || '剧组',\n            avatar: res.data.avatar || '',\n            mobile: res.data.mobile || ''\n          }\n        }\n      } catch (error) {\n        console.error('加载剧组信息失败:', error)\n        this.crewInfo = { nickname: '剧组', avatar: '', mobile: '' }\n      }\n    },\n\n    startTracking() {\n      // 立即获取一次位置\n      this.getMyLocation()\n\n      // 定时上报位置\n      this.trackTimer = setInterval(() => {\n        this.getMyLocation()\n        this.submitTrack()\n      }, 10000) // 每10秒\n    },\n\n    stopTracking() {\n      if (this.trackTimer) {\n        clearInterval(this.trackTimer)\n        this.trackTimer = null\n      }\n    },\n\n    getMyLocation() {\n      uni.getLocation({\n        type: 'gcj02',\n        isHighAccuracy: true,\n        highAccuracyExpireTime: 4000,\n        success: (res) => {\n          this.myLocation = {\n            latitude: res.latitude,\n            longitude: res.longitude\n          }\n          this.mapCenter = { ...this.myLocation }\n          this.updateMapElements()\n          this.calculateDistance()\n          console.log('定位成功, 精度:', res.accuracy, '米')\n        },\n        fail: (err) => {\n          console.error('获取位置失败:', err)\n        }\n      })\n    },\n\n    centerToMyLocation() {\n      if (this.myLocation) {\n        this.mapCenter = { ...this.myLocation }\n      } else {\n        this.getMyLocation()\n      }\n    },\n\n    onRegionChange(e) {\n      // 地图区域变化\n    },\n\n    updateMapElements() {\n      const newMarkers = []\n      const newCircles = []\n\n      // 集合地点标记\n      if (this.meetingLocation) {\n        newMarkers.push({\n          id: 1,\n          latitude: this.meetingLocation.latitude,\n          longitude: this.meetingLocation.longitude,\n          iconPath: '/static/icons/location-meeting.png',\n          width: 40,\n          height: 40,\n          anchor: { x: 0.5, y: 1 },\n          callout: {\n            content: '集合地点',\n            display: 'ALWAYS',\n            bgColor: '#1E1E1E',\n            color: '#FFD700',\n            fontSize: 12,\n            borderRadius: 8,\n            padding: 8\n          }\n        })\n\n        // 电子围栏（100米）\n        newCircles.push({\n          latitude: this.meetingLocation.latitude,\n          longitude: this.meetingLocation.longitude,\n          radius: 100,\n          color: '#FFD70050',\n          fillColor: '#FFD70020',\n          strokeWidth: 2\n        })\n      }\n\n      this.markers = newMarkers\n      this.circles = newCircles\n    },\n\n    calculateDistance() {\n      if (!this.myLocation || !this.meetingLocation) {\n        return\n      }\n\n      const distance = this.getDistance(\n        this.myLocation.latitude,\n        this.myLocation.longitude,\n        this.meetingLocation.latitude,\n        this.meetingLocation.longitude\n      )\n\n      this.distanceToMeeting = distance\n\n      // 判断是否可以打卡（在100米范围内）\n      this.canCheckIn = distance <= 100\n\n      if (this.isCheckedIn) {\n        this.statusText = '已签到'\n        this.distanceText = '工作进行中'\n      } else if (distance <= 100) {\n        this.statusText = '已到达'\n        this.distanceText = '请打卡签到'\n      } else if (distance < 1000) {\n        this.statusText = '即将到达'\n        this.distanceText = `距离集合点 ${Math.round(distance)}米`\n      } else {\n        this.statusText = '前往集合点'\n        this.distanceText = `距离集合点 ${(distance / 1000).toFixed(1)}公里`\n      }\n    },\n\n    getDistance(lat1, lng1, lat2, lng2) {\n      const R = 6371000\n      const dLat = (lat2 - lat1) * Math.PI / 180\n      const dLng = (lng2 - lng1) * Math.PI / 180\n      const a =\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(lat1 * Math.PI / 180) *\n        Math.cos(lat2 * Math.PI / 180) *\n        Math.sin(dLng / 2) * Math.sin(dLng / 2)\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n      return R * c\n    },\n\n    async submitTrack() {\n      if (!this.myLocation || this.isCompleted) return\n\n      try {\n        const orderCo = uniCloud.importObject('order-co')\n        const res = await orderCo.submitTrack(this.orderId, {\n          longitude: this.myLocation.longitude,\n          latitude: this.myLocation.latitude\n        })\n\n        if (res.code === 0) {\n          console.log('轨迹上报成功:', res.data)\n          // 如果进入围栏范围，更新可打卡状态\n          if (res.data && res.data.in_fence) {\n            this.canCheckIn = true\n          }\n        } else {\n          console.warn('轨迹上报失败:', res.message)\n        }\n      } catch (error) {\n        console.error('上报轨迹失败:', error)\n      }\n    },\n\n    async checkIn() {\n      // Task 1: 必须先点击\"我已出发\"才能打卡\n      if (!this.isStarted) {\n        uni.showToast({\n          title: '请先点击我已出发',\n          icon: 'none'\n        })\n        return\n      }\n\n      if (!this.canCheckIn) {\n        uni.showToast({\n          title: '请先到达集合地点（100米范围内）',\n          icon: 'none'\n        })\n        return\n      }\n\n      if (!this.myLocation) {\n        uni.showToast({\n          title: '正在获取位置，请稍后',\n          icon: 'none'\n        })\n        this.getMyLocation()\n        return\n      }\n\n      try {\n        uni.showLoading({ title: '打卡中...', mask: true })\n\n        const orderCo = uniCloud.importObject('order-co')\n        const res = await orderCo.checkIn(this.orderId, {\n          longitude: this.myLocation.longitude,\n          latitude: this.myLocation.latitude\n        })\n\n        uni.hideLoading()\n\n        if (res.code === 0) {\n          this.isCheckedIn = true\n          this.checkinTime = res.data.arrive_time || Date.now()\n\n          // 显示打卡结果\n          let message = '打卡成功'\n          if (res.data.is_late) {\n            message = `打卡成功，迟到${res.data.late_minutes}分钟`\n          }\n\n          uni.showToast({\n            title: message,\n            icon: 'success',\n            duration: 2000\n          })\n\n          // 更新状态显示\n          this.statusText = '已签到'\n          this.distanceText = '工作进行中'\n        } else {\n          // 处理打卡失败\n          let errorMsg = res.message || '打卡失败'\n\n          if (res.code === 400 && res.data) {\n            // 距离太远\n            errorMsg = `距离集合点还有${res.data.distance}米，请靠近后再打卡`\n          }\n\n          uni.showToast({\n            title: errorMsg,\n            icon: 'none',\n            duration: 2500\n          })\n        }\n      } catch (error) {\n        uni.hideLoading()\n        console.error('打卡失败:', error)\n        uni.showToast({\n          title: '网络错误，请重试',\n          icon: 'none'\n        })\n      }\n    },\n\n    formatDateTime(timestamp) {\n      if (!timestamp) return ''\n      const date = new Date(timestamp)\n      const month = String(date.getMonth() + 1).padStart(2, '0')\n      const day = String(date.getDate()).padStart(2, '0')\n      const hour = String(date.getHours()).padStart(2, '0')\n      const minute = String(date.getMinutes()).padStart(2, '0')\n      return `${month}-${day} ${hour}:${minute}`\n    },\n\n    formatTime(timestamp) {\n      if (!timestamp) return ''\n      const date = new Date(timestamp)\n      const hour = String(date.getHours()).padStart(2, '0')\n      const minute = String(date.getMinutes()).padStart(2, '0')\n      return `${hour}:${minute}`\n    },\n\n    formatPrice(amount) {\n      if (!amount) return '0'\n      return (amount / 100).toFixed(0)\n    },\n\n    openNavigation() {\n      if (!this.meetingLocation) {\n        uni.showToast({\n          title: '地址信息不完整',\n          icon: 'none'\n        })\n        return\n      }\n\n      uni.openLocation({\n        latitude: this.meetingLocation.latitude,\n        longitude: this.meetingLocation.longitude,\n        name: this.order.meeting_location_name,\n        address: this.order.meeting_location_name\n      })\n    },\n\n    callCrew() {\n      if (this.crewInfo.mobile) {\n        uni.makePhoneCall({\n          phoneNumber: this.crewInfo.mobile\n        })\n      } else {\n        uni.showToast({\n          title: '暂无联系方式',\n          icon: 'none'\n        })\n      }\n    },\n\n    messageCrew() {\n      // TODO: 消息功能\n      uni.showToast({\n        title: '消息功能开发中',\n        icon: 'none'\n      })\n    },\n\n    // Task 3: 重构问题上报逻辑，删除安全问题\n    reportIssue() {\n      uni.showActionSheet({\n        itemList: ['迟到预警', '无法到达', '其他问题'],\n        success: (res) => {\n          const issueTypes = ['late_warning', 'cannot_arrive', 'other']\n          const issueType = issueTypes[res.tapIndex]\n\n          if (issueType === 'cannot_arrive') {\n            // 无法到达需要特殊处理\n            this.handleCannotArrive()\n          } else if (issueType === 'late_warning') {\n            // Task 3: 迟到预警 - 发送通知给剧组，不再自动取消订单\n            this.handleLateWarning()\n          } else if (issueType === 'other') {\n            // Task 3: 其他问题 - 打开输入对话框\n            this.handleOtherIssue()\n          }\n        }\n      })\n    },\n\n    async handleCannotArrive() {\n      uni.showModal({\n        title: '确认无法到达',\n        content: '确认后您的接单将被取消，订单将重新开放给其他演员。\\n\\n注意：取消接单将扣除5分信用分。',\n        confirmText: '确认取消',\n        confirmColor: '#FF5252',\n        success: async (modalRes) => {\n          if (modalRes.confirm) {\n            try {\n              uni.showLoading({ title: '处理中...', mask: true })\n\n              const orderCo = uniCloud.importObject('order-co')\n              const res = await orderCo.actorCancelOrder(this.orderId, '无法到达')\n\n              uni.hideLoading()\n\n              if (res.code === 0) {\n                uni.showToast({\n                  title: '已取消接单',\n                  icon: 'success'\n                })\n                setTimeout(() => {\n                  uni.navigateBack()\n                }, 1500)\n              } else {\n                uni.showToast({\n                  title: res.message || '操作失败',\n                  icon: 'none'\n                })\n              }\n            } catch (error) {\n              uni.hideLoading()\n              console.error('取消接单失败:', error)\n              uni.showToast({\n                title: '网络错误',\n                icon: 'none'\n              })\n            }\n          }\n        }\n      })\n    },\n\n    async submitIssue(issueType, description = '') {\n      try {\n        const orderCo = uniCloud.importObject('order-co')\n        const issueData = {\n          issue_type: issueType,\n          description: description\n        }\n\n        // 添加位置信息\n        if (this.myLocation) {\n          issueData.location = {\n            longitude: this.myLocation.longitude,\n            latitude: this.myLocation.latitude\n          }\n        }\n\n        const res = await orderCo.reportIssue(this.orderId, issueData)\n\n        if (res.code === 0) {\n          uni.showToast({\n            title: res.message || '已上报',\n            icon: 'success'\n          })\n        } else {\n          uni.showToast({\n            title: res.message || '上报失败',\n            icon: 'none'\n          })\n        }\n      } catch (error) {\n        console.error('上报问题失败:', error)\n        uni.showToast({\n          title: '网络错误',\n          icon: 'none'\n        })\n      }\n    },\n\n    // Task 3: 迟到预警处理 - 发送通知给剧组，不自动取消订单\n    async handleLateWarning() {\n      uni.showModal({\n        title: '迟到预警',\n        content: '确认发送迟到预警通知给剧组吗？',\n        confirmText: '发送',\n        success: async (res) => {\n          if (res.confirm) {\n            // 获取用户昵称\n            const userName = uni.getStorageSync('userInfo')?.nickname || '演员'\n            const message = '演员昵称: ' + userName + ', 可能迟到'\n\n            // 发送通知给剧组\n            await this.notifyCrew(message, 'late_warning')\n\n            // 同时记录问题\n            await this.submitIssue('late_warning', message)\n          }\n        }\n      })\n    },\n\n    // Task 3: 其他问题处理 - 打开输入对话框\n    handleOtherIssue() {\n      uni.showModal({\n        title: '问题描述',\n        content: '',\n        editable: true,\n        placeholderText: '请输入问题详情...',\n        confirmText: '发送',\n        success: async (res) => {\n          if (res.confirm && res.content) {\n            const inputText = res.content.trim()\n            if (!inputText) {\n              uni.showToast({\n                title: '请输入问题描述',\n                icon: 'none'\n              })\n              return\n            }\n\n            // 获取用户昵称\n            const userName = uni.getStorageSync('userInfo')?.nickname || '演员'\n            const message = '演员昵称: ' + userName + ', \"' + inputText + '\"'\n\n            // 发送通知给剧组\n            await this.notifyCrew(message, 'other')\n\n            // 同时记录问题\n            await this.submitIssue('other', message)\n          }\n        }\n      })\n    },\n\n    // Task 3: 发送通知给剧组\n    async notifyCrew(message, issueType) {\n      try {\n        uni.showLoading({ title: '发送中...', mask: true })\n\n        const orderCo = uniCloud.importObject('order-co')\n        const res = await orderCo.notifyCrewIssue(this.orderId, {\n          message: message,\n          issue_type: issueType,\n          actor_location: this.myLocation ? {\n            longitude: this.myLocation.longitude,\n            latitude: this.myLocation.latitude\n          } : null\n        })\n\n        uni.hideLoading()\n\n        if (res.code === 0) {\n          uni.showToast({\n            title: '已通知剧组',\n            icon: 'success'\n          })\n        } else {\n          uni.showToast({\n            title: res.message || '通知失败',\n            icon: 'none'\n          })\n        }\n      } catch (error) {\n        uni.hideLoading()\n        console.error('通知剧组失败:', error)\n        uni.showToast({\n          title: '网络错误，请重试',\n          icon: 'none'\n        })\n      }\n    },\n\n    async startDeparture() {\n      uni.showModal({\n        title: '确认出发',\n        content: '请保持定位权限开启，追踪过程中请勿退出或切换小程序。',\n        confirmText: '我已出发',\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              uni.showLoading({ title: '确认中...', mask: true })\n\n              const orderCo = uniCloud.importObject('order-co')\n              const result = await orderCo.startDeparture(this.orderId)\n\n              uni.hideLoading()\n\n              if (result.code === 0) {\n                this.isStarted = true\n                this.startTracking()\n                uni.showToast({\n                  title: '已出发，开始追踪',\n                  icon: 'success'\n                })\n              } else {\n                uni.showToast({\n                  title: result.message || '操作失败',\n                  icon: 'none'\n                })\n              }\n            } catch (error) {\n              uni.hideLoading()\n              console.error('确认出发失败:', error)\n              uni.showToast({\n                title: '网络错误',\n                icon: 'none'\n              })\n            }\n          }\n        }\n      })\n    },\n\n    async completeWork() {\n      // 演员端提示：订单完成需要剧组确认\n      uni.showModal({\n        title: '请求完工确认',\n        content: '工作完成后，请联系剧组进行完工确认。\\n\\n完工后您将获得报酬和信用分奖励。',\n        confirmText: '联系剧组',\n        cancelText: '稍后再说',\n        success: (res) => {\n          if (res.confirm) {\n            // 跳转联系剧组\n            if (this.crewInfo.mobile) {\n              uni.makePhoneCall({\n                phoneNumber: this.crewInfo.mobile\n              })\n            } else {\n              uni.showToast({\n                title: '暂无联系方式，请在消息中联系',\n                icon: 'none'\n              })\n            }\n          }\n        }\n      })\n    },\n\n    viewDetail() {\n      // 完成后跳转到我的订单页面\n      uni.navigateTo({\n        url: '/pages/actor/my_orders'\n      })\n    },\n\n    goBack() {\n      uni.navigateBack()\n    },\n\n    // 取消申请\n    async cancelApplication() {\n      uni.showModal({\n        title: '确认取消',\n        content: '确定要取消申请吗？取消后可以重新申请。',\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              uni.showLoading({ title: '取消中...', mask: true })\n\n              const orderCo = uniCloud.importObject('order-co')\n              const result = await orderCo.cancelApplication(this.orderId)\n\n              uni.hideLoading()\n\n              if (result.code === 0) {\n                uni.showToast({\n                  title: '已取消申请',\n                  icon: 'success'\n                })\n                setTimeout(() => {\n                  uni.navigateBack()\n                }, 1500)\n              } else {\n                uni.showToast({\n                  title: result.message || '取消失败',\n                  icon: 'none'\n                })\n              }\n            } catch (error) {\n              uni.hideLoading()\n              console.error('取消申请失败:', error)\n              uni.showToast({\n                title: '网络错误',\n                icon: 'none'\n              })\n            }\n          }\n        }\n      })\n    },\n\n    // 刷新申请状态\n    async refreshStatus() {\n      uni.showLoading({ title: '刷新中...', mask: true })\n      await this.loadOrderInfo()\n      uni.hideLoading()\n\n      if (this.applicationStatus === 'approved') {\n        uni.showToast({\n          title: '申请已通过！',\n          icon: 'success'\n        })\n      } else if (this.applicationStatus === 'rejected') {\n        uni.showToast({\n          title: '申请未通过',\n          icon: 'none'\n        })\n      } else {\n        uni.showToast({\n          title: '仍在审核中',\n          icon: 'none'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/common/theme.scss';\n\n.tracking-page {\n  width: 100%;\n  height: 100vh;\n  position: relative;\n  background-color: $bg-primary;\n}\n\n// 申请待审核页面\n.pending-page,\n.rejected-page {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: $spacing-xl;\n  background-color: $bg-primary;\n}\n\n.pending-content,\n.rejected-content {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n\n.pending-icon,\n.rejected-icon {\n  margin-bottom: $spacing-lg;\n}\n\n.pending-title,\n.rejected-title {\n  font-size: 48rpx;\n  font-weight: $font-weight-bold;\n  color: $text-primary;\n  margin-bottom: $spacing-sm;\n}\n\n.pending-desc,\n.rejected-desc {\n  font-size: $font-size-base;\n  color: $text-secondary;\n  margin-bottom: $spacing-xl;\n}\n\n.pending-order-info {\n  width: 100%;\n  background-color: $bg-secondary;\n  border-radius: $border-radius-lg;\n  padding: $spacing-lg;\n  margin-bottom: $spacing-xl;\n\n  .order-info-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: $spacing-sm 0;\n    border-bottom: 1rpx solid rgba(255, 255, 255, 0.08);\n\n    &:last-child {\n      border-bottom: none;\n    }\n\n    .label {\n      font-size: $font-size-sm;\n      color: $text-secondary;\n    }\n\n    .value {\n      font-size: $font-size-base;\n      color: $text-primary;\n      text-align: right;\n      max-width: 60%;\n\n      &.price {\n        color: $primary-color;\n        font-weight: $font-weight-bold;\n      }\n    }\n  }\n}\n\n.pending-actions,\n.rejected-actions {\n  width: 100%;\n  display: flex;\n  gap: $spacing-base;\n\n  button {\n    flex: 1;\n    height: 88rpx;\n    line-height: 88rpx;\n    border-radius: $border-radius-base;\n    font-size: $font-size-base;\n    font-weight: $font-weight-bold;\n  }\n\n  .btn-primary {\n    @include button-primary;\n  }\n\n  .btn-secondary {\n    @include button-secondary;\n  }\n}\n\n.tracking-map {\n  width: 100%;\n  height: 50vh;\n}\n\n// 状态覆盖层\n.status-overlay {\n  position: absolute;\n  top: 32rpx;\n  left: 32rpx;\n  right: 32rpx;\n}\n\n.status-card-cover {\n  background-color: rgba(30, 30, 30, 0.95);\n  border-radius: 16rpx;\n  padding: 24rpx 32rpx;\n}\n\n.status-title {\n  font-size: 32rpx;\n  font-weight: 700;\n  color: #FFD700;\n  display: block;\n}\n\n.status-distance {\n  font-size: 24rpx;\n  color: rgba(255, 255, 255, 0.7);\n  margin-top: 8rpx;\n  display: block;\n}\n\n// 定位按钮\n.location-btn {\n  position: absolute;\n  right: 32rpx;\n  bottom: 32rpx;\n  width: 80rpx;\n  height: 80rpx;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.location-icon {\n  font-size: 32rpx;\n  color: #2979FF;\n  font-weight: bold;\n}\n\n// 底部信息面板\n.info-panel {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: $bg-secondary;\n  border-radius: $border-radius-lg $border-radius-lg 0 0;\n  padding: $spacing-lg;\n  padding-bottom: calc(#{$spacing-lg} + env(safe-area-inset-bottom));\n  max-height: 55vh;\n  overflow-y: auto;\n}\n\n// 订单信息区域\n.order-info-section {\n  padding-bottom: $spacing-base;\n  border-bottom: 1rpx solid rgba(255, 255, 255, 0.1);\n\n  .info-row {\n    display: flex;\n    align-items: center;\n    gap: $spacing-sm;\n    padding: $spacing-sm 0;\n\n    .info-content {\n      flex: 1;\n      @include flex-column;\n      gap: 4rpx;\n\n      .info-label {\n        font-size: $font-size-xs;\n        color: $text-secondary;\n      }\n\n      .info-value {\n        font-size: $font-size-base;\n        color: $text-primary;\n\n        &.price {\n          color: $primary-color;\n          font-weight: $font-weight-bold;\n          font-family: $font-family-monospace;\n        }\n      }\n    }\n\n    .nav-btn {\n      width: 80rpx;\n      height: 80rpx;\n      @include flex-center;\n      background-color: $bg-tertiary;\n      border-radius: 50%;\n\n      &:active {\n        opacity: 0.8;\n      }\n    }\n  }\n}\n\n// 打卡区域\n.checkin-section {\n  padding: $spacing-lg 0;\n  border-bottom: 1rpx solid rgba(255, 255, 255, 0.1);\n}\n\n.checkin-status {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: $spacing-lg;\n\n  .status-item {\n    display: flex;\n    align-items: center;\n    gap: $spacing-xs;\n\n    .status-dot {\n      width: 24rpx;\n      height: 24rpx;\n      border-radius: 50%;\n      background-color: $gray-4;\n      border: 4rpx solid $gray-3;\n    }\n\n    text {\n      font-size: $font-size-sm;\n      color: $text-secondary;\n    }\n\n    &.done {\n      .status-dot {\n        background-color: $success-color;\n        border-color: $success-color;\n      }\n\n      text {\n        color: $success-color;\n      }\n    }\n  }\n\n  .status-line {\n    width: 100rpx;\n    height: 4rpx;\n    background-color: $gray-4;\n    margin: 0 $spacing-sm;\n\n    &.active {\n      background-color: $success-color;\n    }\n  }\n}\n\n.checkin-action {\n  @include flex-center;\n}\n\n.checkin-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: $spacing-sm;\n  width: 100%;\n  height: 100rpx;\n  @include button-primary;\n  font-size: $font-size-lg;\n\n  &.disabled {\n    opacity: 0.5;\n    background: $gray-4;\n  }\n}\n\n.checkin-done {\n  display: flex;\n  align-items: center;\n  gap: $spacing-sm;\n  padding: $spacing-base;\n  background-color: rgba($success-color, 0.1);\n  border-radius: $border-radius-base;\n\n  text {\n    font-size: $font-size-base;\n    color: $success-color;\n  }\n}\n\n// 联系区域\n.contact-section {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: $spacing-base 0;\n  border-bottom: 1rpx solid rgba(255, 255, 255, 0.1);\n\n  .contact-info {\n    display: flex;\n    align-items: center;\n    gap: $spacing-sm;\n\n    .crew-avatar {\n      width: 80rpx;\n      height: 80rpx;\n      border-radius: 50%;\n      background-color: $gray-4;\n    }\n\n    .crew-detail {\n      @include flex-column;\n      gap: 4rpx;\n\n      .crew-name {\n        font-size: $font-size-base;\n        font-weight: $font-weight-bold;\n        color: $text-primary;\n      }\n\n      .crew-label {\n        font-size: $font-size-xs;\n        color: $text-secondary;\n      }\n    }\n  }\n\n  .contact-actions {\n    display: flex;\n    gap: $spacing-sm;\n\n    .contact-btn {\n      width: 80rpx;\n      height: 80rpx;\n      @include flex-center;\n      background-color: $bg-tertiary;\n      border-radius: 50%;\n\n      &:active {\n        opacity: 0.8;\n      }\n    }\n  }\n}\n\n// 取消提示\n.cancelled-banner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: $spacing-sm;\n  padding: $spacing-base;\n  margin-bottom: $spacing-base;\n  background-color: rgba(#FF5252, 0.1);\n  border-radius: $border-radius-base;\n  border: 1rpx solid rgba(#FF5252, 0.3);\n\n  text {\n    font-size: $font-size-base;\n    color: #FF5252;\n    font-weight: $font-weight-bold;\n  }\n}\n\n// 底部操作\n.bottom-actions {\n  display: flex;\n  gap: $spacing-base;\n  margin-top: $spacing-base;\n\n  button {\n    flex: 1;\n    height: 88rpx;\n    line-height: 88rpx;\n    border-radius: $border-radius-base;\n    font-size: $font-size-base;\n    font-weight: $font-weight-bold;\n  }\n\n  .btn-primary {\n    @include button-primary;\n\n    &.departure {\n      background: linear-gradient(135deg, #2979FF 0%, #64B5F6 100%);\n    }\n\n    &.completed {\n      background: linear-gradient(135deg, #4CAF50 0%, #81C784 100%);\n    }\n\n    &.waiting {\n      background: linear-gradient(135deg, #FF9800 0%, #FFB74D 100%);\n      opacity: 0.8;\n    }\n\n    &.disabled {\n      opacity: 0.5;\n      background: $gray-4;\n    }\n  }\n\n  .btn-secondary {\n    @include button-secondary;\n  }\n}\n</style>\n","import mod from \"-!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_tracking.vue?vue&type=style&index=0&id=3e7992db&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_tracking.vue?vue&type=style&index=0&id=3e7992db&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1768460232167\n      var cssReload = require(\"D:/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}