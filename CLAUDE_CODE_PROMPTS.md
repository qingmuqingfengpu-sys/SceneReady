# Claude Code 开发提示词集合

> 本文档提供下一步开发时可直接复制使用的Claude Code提示词

---

## 📋 使用说明

1. 根据开发任务选择对应的提示词
2. 复制提示词到Claude Code对话框
3. Claude Code会自动执行相应的开发任务
4. 开发完成后查看代码并测试

---

## 🔥 立即可用的提示词

### 1. 上传云函数到云端

```
请帮我检查uniCloud-aliyun/cloudfunctions目录下的云函数状态，并生成上传部署的详细步骤说明。特别说明：
1. order-co云对象的上传方法
2. geo-service云函数的上传方法
3. 如何在HBuilderX中操作
4. 上传后如何测试
```

---

### 2. 添加静态图标资源

```
项目中引用了以下静态图标，但文件不存在：
- /static/icons/location.png
- /static/default-avatar.png
- /static/default-crew.png
- /static/empty-order.png

请帮我：
1. 创建这些目录
2. 用uni-icons组件替代这些图标（推荐方案）
3. 或者告诉我这些图标的推荐尺寸和设计规范
```

---

### 3. 测试现有功能

```
请帮我生成一份完整的功能测试清单，包括：
1. 剧组端发单功能的测试步骤
2. 订单列表的测试步骤
3. 演员端首页的测试步骤
4. 登录功能的测试步骤
5. 每个功能的预期结果

并告诉我如何在控制台查看调试信息。
```

---

## 🚀 本周开发提示词（P0优先级）

### Day 1: 开发抢单功能接口

```
我需要在order-co云对象中实现演员抢单功能。参考API_STATUS.md文档中的说明，帮我开发grab()方法，要求：

1. 检查用户登录状态和角色（必须是演员，user_role=2）
2. 检查订单是否存在且状态为待接单（order_status=0）
3. 检查演员是否已抢过该订单
4. 检查订单是否已被其他演员抢走
5. 更新订单的receiver_id为当前用户
6. 更新订单状态为进行中（order_status=1）
7. 返回成功信息

同时更新前端pages/actor/index.vue中的grabOrder()方法，调用真实接口替换模拟数据。

请完整实现并告诉我测试步骤。
```

---

### Day 2: 开发获取可接订单接口

```
我需要在order-co云对象中实现获取可接订单列表的功能。参考API_STATUS.md文档，帮我开发getAvailableJobs()方法，要求：

输入参数：
- location: { latitude, longitude } - 演员当前位置
- filters: { distance, price, welfare } - 筛选条件
- page: 页码
- pageSize: 每页数量

功能：
1. 检查用户登录状态
2. 查询订单状态=0（待接单）的订单
3. 使用GeoNear聚合查询根据距离排序
4. 应用距离筛选（3km/5km/10km）
5. 应用价格筛选（100以下/100-200/200以上）
6. 应用福利筛选（包盒饭/报销路费等）
7. 分页返回结果，包含距离信息

同时更新前端pages/actor/index.vue中的loadJobs()方法，调用真实接口。

请使用聚合查询实现，并提供测试数据。
```

---

### Day 3: 开发获取附近演员接口

```
我需要在order-co云对象中实现获取附近演员列表的功能。参考API_STATUS.md文档，帮我开发getNearbyActors()方法，要求：

输入参数：
- location: { latitude, longitude } - 剧组当前位置
- filters: { gender, heightMin, heightMax, skills } - 筛选条件

功能：
1. 检查用户登录状态和角色（必须是剧组，user_role=1）
2. 从uni-id-users表查询角色为演员（user_role=2）的用户
3. 筛选在线状态（需要演员实时位置，可能需要新建表actor_locations）
4. 根据距离排序（使用GeoNear）
5. 应用性别筛选
6. 应用身高范围筛选
7. 应用特长筛选
8. 返回演员信息（包含距离、头像、昵称、信用分、技能等）

注意：演员实时位置需要单独的表存储。如果表不存在，请先设计actor_locations表的Schema。

同时更新前端pages/crew/index.vue中的loadNearbyActors()方法，调用真实接口。

请完整实现并说明如何存储演员位置。
```

---

### Day 4: 创建订单详情页（剧组端）

```
基于现有的设计系统（common/theme.scss），帮我创建剧组端订单详情页 pages/crew/order_detail.vue，要求：

UI设计：
1. 顶部订单状态卡片（待接单/进行中/待支付/已完成/已取消）
2. 订单信息区域（角色、地点、时间、人数、价格）
3. 演员要求区域（性别、身高、体型、特长）
4. 福利待遇标签
5. 接单者信息卡片（已接单后显示）
   - 演员头像、昵称、信用分
   - 联系方式（电话号码，脱敏显示）
   - 查看详情按钮
6. 底部操作按钮区域
   - 待接单状态：取消订单
   - 进行中状态：开始追踪、联系演员
   - 待支付状态：确认完成、支付
   - 已完成状态：评价演员

功能：
1. onLoad时从query获取订单ID
2. 调用order-co.getMyOrders()获取订单详情
3. 根据订单状态显示不同操作
4. 取消订单调用order-co.cancel()
5. 开始追踪跳转到order_tracking页面

请使用暗黑模式设计，金色强调色，完整实现并说明路由配置。
```

---

### Day 5: 创建订单详情页（演员端）

```
基于剧组端订单详情页的设计，帮我创建演员端订单详情页 pages/actor/job_detail.vue，要求：

UI设计（与剧组端类似但视角不同）：
1. 顶部订单状态卡片
2. 订单信息区域
3. 剧组信息卡片
   - 剧组头像、名称、信用分
   - 联系方式
   - 查看详情按钮
4. 福利待遇标签
5. 底部操作按钮区域
   - 待接单状态：立即抢单
   - 进行中状态：开始追踪、联系剧组、我已到达
   - 待支付状态：等待结算
   - 已完成状态：评价剧组

功能：
1. onLoad时从query获取订单ID
2. 调用order-co.getAvailableJobs()或专门的详情接口获取订单
3. 抢单调用order-co.grab()
4. 开始追踪跳转到order_tracking页面

请保持与剧组端一致的设计风格。
```

---

## 📅 下周开发提示词（履约追踪功能）

### Day 6: 设计轨迹上报接口

```
我需要实现订单履约追踪的后端接口。参考API_STATUS.md和order_tracks表设计，帮我实现以下三个方法：

1. submitTrack(orderId, location) - 提交轨迹
   - 检查用户是该订单的演员
   - 插入轨迹记录到order_tracks表
   - 计算到集合地点的距离
   - 返回距离和预估到达时间

2. getTracks(orderId) - 获取订单轨迹
   - 检查用户是该订单的演员或剧组
   - 查询该订单的所有轨迹点
   - 按时间排序返回
   - 支持筛选track_type（auto/manual/checkpoint）

3. checkIn(orderId, location) - 打卡
   - 计算是否在电子围栏内（100m）
   - 记录打卡时间和位置
   - 更新订单状态
   - 返回打卡结果

请提供完整的代码实现和距离计算公式。
```

---

### Day 7: 创建演员端追踪页面

```
基于设计系统，帮我创建演员端履约追踪页面 pages/actor/order_tracking.vue，要求：

UI设计：
1. 全屏地图显示
   - 演员当前位置（蓝色marker）
   - 集合地点（红色marker）
   - 路线规划（虚线连接）
   - 电子围栏（100m圆圈）
2. 顶部信息卡片（半透明背景）
   - 订单信息（角色名称、集合时间）
   - 距离和预估时间（大号数字）
3. 底部操作区域
   - "我已出发"按钮（预约单显示）
   - "到达打卡"按钮（在围栏内高亮）
   - 联系剧组按钮
   - 返回按钮

功能：
1. onLoad时获取订单信息
2. 获取当前位置并显示在地图上
3. 区分即时单和预约单
   - 即时单：立即开启位置上报
   - 预约单：点击"我已出发"后开启
4. 每10秒上报一次位置（调用submitTrack）
5. 实时计算距离和预估时间
6. 检测是否进入电子围栏
7. 在围栏内点击"到达打卡"调用checkIn
8. onUnload时停止位置上报

请实现定时器和地图控制逻辑。
```

---

### Day 8: 创建剧组端追踪页面

```
基于演员端追踪页面，帮我创建剧组端履约追踪页面 pages/crew/order_tracking.vue，要求：

UI设计（与演员端类似但视角不同）：
1. 全屏地图显示
   - 演员实时位置（蓝色marker）
   - 集合地点（红色marker）
   - 移动轨迹（蓝色线条）
   - 电子围栏（100m圆圈）
2. 顶部信息卡片
   - 演员信息（头像、昵称）
   - 距离和预估时间
   - 出发状态（已出发/未出发）
3. 底部操作区域
   - 刷新位置按钮
   - 联系演员按钮
   - 返回按钮

功能：
1. onLoad时获取订单信息
2. 调用getTracks获取演员轨迹
3. 每5秒刷新一次轨迹（调用getTracks）
4. 在地图上绘制移动轨迹
5. 实时显示演员位置和距离
6. 检测演员是否到达（自动刷新）
7. 支持手动刷新

注意：剧组端只能查看，不能上报位置。

请实现轨迹绘制逻辑。
```

---

### Day 9: 测试和优化追踪功能

```
帮我生成履约追踪功能的完整测试方案，包括：

1. 单元测试
   - submitTrack接口测试
   - getTracks接口测试
   - checkIn接口测试
   - 距离计算测试

2. 集成测试
   - 演员端上报位置流程
   - 剧组端查看轨迹流程
   - 打卡功能流程

3. 性能测试
   - 10秒上报一次是否合理
   - 轨迹点数量限制
   - 地图渲染性能

4. 边界情况测试
   - 演员离线后重连
   - GPS信号弱或漂移
   - 电子围栏边界判断
   - 取消订单后停止追踪

请提供测试步骤和预期结果。
```

---

## 🎯 后续迭代提示词

### Week 3: 用户系统开发

```
帮我创建user-co云对象并实现以下功能：

1. getProfile(userId) - 获取用户资料
   - 支持查看剧组和演员的详细信息
   - 包含历史订单统计
   - 包含信用分历史

2. updateProfile(data) - 更新个人资料
   - 支持更新昵称、简介、头像
   - 支持上传个人介绍图片（多张）
   - 数据校验

3. getStats(userId) - 获取统计数据
   - 剧组：发布订单数、合作演员数、平均评分
   - 演员：接单数、合作剧组数、收入统计、平均评分

4. getCreditHistory(userId) - 获取信用分历史
   - 分页查询信用分变化记录
   - 显示变化原因

同时创建：
- pages/crew/profile.vue（剧组中心页面）
- pages/actor/profile.vue（演员个人中心页面）

请参考现有设计系统实现。
```

---

### Week 3: 视频模卡上传

```
帮我实现视频模卡上传功能，要求：

1. 后端接口（user-co.uploadVideoCard）
   - 使用uniCloud云存储
   - 限制视频大小（最大50MB）
   - 限制视频时长（最大10秒）
   - 生成视频封面图
   - 返回视频URL

2. 前端上传界面（pages/actor/upload_video_card.vue）
   - 选择视频文件（uni.chooseVideo）
   - 视频预览
   - 上传进度显示
   - 上传成功后更新个人资料

3. 视频播放
   - 在剧组端地图弹窗中自动播放（静音）
   - 在演员详情页中可控制播放

请提供完整的实现方案和uniCloud存储配置方法。
```

---

### Week 4: 社区系统开发

```
帮我创建community-co云对象并实现社区功能：

1. getPosts(type, page) - 获取帖子列表
   - type: job_market（通告集市）/ experience（经验干货）/ blacklist（红黑榜）
   - 支持分页
   - 支持排序（最新/最热）

2. createPost(data) - 发布帖子
   - 支持文字和图片
   - 支持标签
   - 内容审核

3. getBlacklist(page) - 获取红黑榜
   - 显示被举报的用户
   - 显示违规原因和扣分详情
   - 敏感信息脱敏

4. reportUser(userId, reason) - 举报用户
   - 提交举报信息
   - 待审核处理

同时创建社区页面：
- pages/crew/community.vue
- pages/actor/community.vue

使用uni-segmented-control实现Tab切换。
```

---

### Week 5: 支付结算功能

```
帮我实现支付结算功能，要求：

1. 集成微信支付
   - 创建payment云函数
   - 实现统一下单接口
   - 实现支付回调处理
   - 更新订单状态

2. 钱包系统
   - 创建wallet云对象
   - 实现余额查询
   - 实现充值功能
   - 实现提现功能
   - 实现交易记录查询

3. 订单结算流程
   - 剧组确认完成订单
   - 演员确认完成订单
   - 双方确认后进入待支付状态
   - 剧组支付
   - 平台抽成
   - 演员到账

请提供完整的支付流程设计和安全措施。
```

---

## 🐛 问题排查提示词

### 排查登录问题

```
我的应用登录后仍然提示未登录，请帮我排查：

1. 检查token存储
   - 查看uni.getStorageSync('uni_id_token')
   - 查看uni.getStorageSync('uni_id_token_expired')

2. 检查云函数
   - order-co中this.getUniIdToken()是否正常
   - 云函数是否已上传到云端

3. 检查前端代码
   - pages/crew/index.vue中的checkLogin()方法
   - pages/actor/index.vue中的checkLogin()方法

4. 生成调试代码
   - 在控制台输出token状态
   - 在云函数中输出token状态

请提供详细的排查步骤和修复方案。
```

---

### 排查地图不显示问题

```
我的地图组件不显示，请帮我排查：

1. 检查manifest.json配置
   - 高德地图Key是否正确
   - 权限配置是否完整

2. 检查页面代码
   - pages/crew/index.vue中的map组件
   - latitude和longitude是否正确

3. 检查控制台错误
   - 是否有地图加载失败的报错
   - 是否有权限拒绝的提示

4. 生成测试代码
   - 测试uni.getLocation是否正常
   - 测试地图组件是否能渲染

请提供解决方案和测试步骤。
```

---

### 排查数据不显示问题

```
我的列表数据不显示，请帮我排查：

1. 检查数据加载
   - 控制台是否有接口报错
   - 数据格式是否正确
   - 是否使用了模拟数据

2. 检查页面渲染
   - v-for的key是否唯一
   - 条件渲染是否正确
   - 样式是否被遮挡

3. 检查云函数
   - 接口是否返回数据
   - 数据结构是否匹配

4. 生成调试代码
   - 在控制台输出数据
   - 在页面上显示原始数据

请提供排查清单和修复建议。
```

---

## 📝 代码优化提示词

### 性能优化

```
请帮我优化以下页面的性能：
- pages/crew/index.vue（地图页面）
- pages/actor/index.vue（列表页面）

关注点：
1. 长列表渲染优化
2. 地图标记点数量优化
3. 图片懒加载
4. 数据请求优化（防抖、节流）
5. 内存泄漏检查

请分析代码并提供优化方案。
```

---

### 代码规范检查

```
请帮我检查项目代码规范，包括：

1. 命名规范
   - 变量命名
   - 函数命名
   - 文件命名

2. 代码结构
   - 组件拆分
   - 方法组织
   - 样式组织

3. 注释规范
   - 函数注释
   - 复杂逻辑注释
   - TODO标记

4. 错误处理
   - try-catch使用
   - 错误提示
   - 边界情况处理

请提供改进建议。
```

---

### 安全性检查

```
请帮我检查项目的安全性问题：

1. 数据验证
   - 前端输入校验
   - 后端参数校验
   - SQL注入防护

2. 权限控制
   - 用户角色检查
   - 操作权限检查
   - 数据权限控制

3. 敏感信息
   - 手机号脱敏
   - 地址信息保护
   - 个人隐私保护

4. 云函数安全
   - token验证
   - 参数过滤
   - 频率限制

请提供安全加固方案。
```

---

## 🎨 UI/UX优化提示词

### 优化用户体验

```
请帮我优化以下页面的用户体验：

1. pages/actor/index.vue（演员首页）
   - 加载状态优化
   - 空状态优化
   - 错误状态优化
   - 骨架屏设计

2. pages/crew/index.vue（剧组地图首页）
   - 地图加载动画
   - 抽屉滑动体验
   - 筛选器交互

3. 全局
   - 页面切换动画
   - 按钮点击反馈
   - 表单输入体验

请提供优化方案和代码。
```

---

### 适配暗黑模式

```
项目当前使用暗黑模式设计，请帮我检查并优化：

1. 检查所有页面的暗黑模式适配
2. 确保文本对比度足够
3. 优化金色强调色的使用
4. 检查图标的可见性
5. 优化输入框和按钮的视觉层次

请提供优化建议和代码修改。
```

---

## 📚 文档生成提示词

### 生成API文档

```
请帮我生成完整的API文档，包括：

1. 所有云对象的接口文档
   - 接口名称和描述
   - 请求参数
   - 返回数据
   - 错误码说明
   - 使用示例

2. 云函数文档
   - geo-service的使用说明
   - payment的使用说明

3. 数据库文档
   - 表结构说明
   - 字段说明
   - 索引说明

格式：Markdown，包含代码示例。
```

---

### 生成测试文档

```
请帮我生成完整的测试文档，包括：

1. 功能测试用例
   - 剧组端功能测试
   - 演员端功能测试
   - 追踪功能测试

2. 接口测试用例
   - 每个接口的测试用例
   - 边界值测试
   - 异常情况测试

3. 性能测试用例
   - 并发测试
   - 压力测试
   - 长时间运行测试

格式：表格形式，包含测试步骤和预期结果。
```

---

### 生成用户手册

```
请帮我生成用户使用手册，包括：

1. 剧组端使用指南
   - 注册和认证
   - 发布订单流程
   - 查看演员和抢单
   - 追踪管理
   - 评价和结算

2. 演员端使用指南
   - 注册和认证
   - 上传视频模卡
   - 抢单流程
   - 履约追踪
   - 收入管理

3. 常见问题FAQ

格式：图文并茂的Markdown文档。
```

---

## 🎯 使用技巧

### 提示词组合使用

可以将多个提示词组合使用，例如：

```
我需要完成Day 1和Day 2的任务，请帮我：
1. 先实现grab()接口
2. 再实现getAvailableJobs()接口
3. 更新前端页面调用真实接口
4. 生成测试步骤

请一步步完成并告诉我进度。
```

---

### 增量开发

对于复杂功能，可以分步骤开发：

```
我要开发履约追踪功能，请先帮我：
1. 设计数据表结构（如果需要新表）
2. 实现后端接口
3. 测试后端接口

前端页面我们下一步再做。
```

---

### 问题调试

遇到问题时，详细描述：

```
我在测试抢单功能时遇到错误：[粘贴错误信息]

环境：
- 微信小程序开发工具
- uniCloud云端环境
- 已登录状态

请帮我分析问题并提供解决方案。
```

---

## 📞 获取帮助

如果提示词执行遇到问题：

1. **检查文档**：先查看 `PROJECT_STATUS.md` 和 `API_STATUS.md`
2. **简化提示词**：将复杂任务拆分为多个简单任务
3. **提供上下文**：告诉Claude Code你在哪个阶段、遇到什么问题
4. **查看日志**：提供控制台错误信息

---

**祝开发顺利！🚀**

---

## 📄 相关文档

- `PROJECT_STATUS.md` - 项目进度总结
- `API_STATUS.md` - 接口状态文档
- `DEVELOPMENT_SUMMARY.md` - 前端开发总结
- `README.md` - 产品需求文档
